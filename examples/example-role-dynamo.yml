name: Event pump to DynamoDB
source: 
  type: json
  file: ./examples/events/roles.seed.json
patterns:
  - name: roleCreate
    rule:
      noun: role
      verb: create
    action:
      target: dynamodb
      params:
        TableName: Example
        Item:
          pk: "role#{{id}}"
          sk: "role"
          id: "{{id}}"
          roleName: "{{roleName}}"
          organisationId: "{{organisationId}}"
          allow: "{{allow}}"
  - name: roleUpdate
    rule:
      noun: role
      verb: update
    action:
      target: dynamodb
      params:
        TableName: Example
        Key:
          pk: "role#{{id}}"
          sk: "role"
        ExpressionAttributeValues:
          ":organisationId": "{{organisationId}}"
          ":allow": "{{allow}}"
          ":roleName": "{{roleName}}"
  - name: roleDelete
    rule:
      noun: role
      verb: delete
    action:
      target: dynamodb
      params:
        TableName: Example
        Item:
          pk: "role#{{id}}"
          sk: "role"